Hier ist der Plan, wo deine alten Dateien im neuen System landen.

/src/core (Das Gehirn - Reine Logik, kein UI)

Hier lebt die "Magic Chain".

types.ts: Die oben definierten Interfaces.

config.ts: API-Keys, Konstanten (ehemals config.js).

/workflow:

Orchestrator.ts: Die Steuerungsklasse (ehemals workflow-orchestrator.js).

TaskRunner.ts: F√ºhrt einzelne KI-Jobs aus.

/prompts:

PromptBuilder.ts: W√§hlt Sprache aus.

templates/: Hier liegen chef-planer.ts, sammler.ts etc., aber als Templates, die Textbausteine injizieren.

/src/store (Das Ged√§chtnis)

useTripStore.ts: Der Zustand-Store, der das TripProject h√§lt.

actions/:

importExport.ts: Logik f√ºr Datei-Upload/Download (ehemals file-actions.js).

mergeLogic.ts: Die intelligente Merge-Engine.

/src/data (Statische Konfiguration)

app-data.ts: Enth√§lt nur die Struktur (IDs, Icons, Logik-Regeln). KEINE Texte.

Beispiel: interests: [{ id: 'hiking', icon: 'boot' }]

/src/i18n (Die Sprache)

locales/de.json: { "interest_hiking": "Wanderurlaub", "btn_start": "Los geht's" }

locales/en.json: { "interest_hiking": "Hiking Trip", "btn_start": "Let's go" }

/src/services (Die Werkzeuge)

GeminiService.ts: Typisierte API-Calls (ehemals api-service.js).

GeoService.ts: Berechnungen f√ºr Distanzen (ehemals Teile von utilities.js).

/src/ui (Das Gesicht - React Komponenten)

layouts/MainLayout.tsx: Header, Navigation.

views/Cockpit/: Die Eingabe-Formulare (Schritt 1-6).

views/Itinerary/: Die Drag & Drop Tagesplanung.

components/cards/SightCard.tsx: Die Anzeige einer Karte (ehemals render-sights-view.js).


1. Die Architektur-Landkarte: Alt vs. Neu

Hier siehst du genau, wohin deine bisherigen Dateien wandern. Wir l√∂schen nichts, wir sortieren es neu und machen es robuster.

Bereich	Alte Datei (V30.3)	Neuer Ort (V40)	√Ñnderung / Aufgabe
Daten (SSOT)	app-state.js	src/core/types.ts	Wichtigste Datei! Definition aller Interfaces (TypeScript).
app-state.js (Werte)	src/store/useTripStore.ts	Der aktive Speicher (Zustand State Manager).
Konfiguration	app-data.js	src/data/staticData.ts	Bereinigt um alle Texte! Nur noch IDs und Icons.
config.js	src/config/appConfig.ts	API-Endpunkte, Limits, Konstanten.
Sprache (i18n)	(Existiert nicht)	src/locales/de.json	Alle deutschen Texte (UI + Fehlermeldungen).
(Existiert nicht)	src/locales/en.json	Alle englischen Texte.
KI-Gehirn	workflow-orchestrator.js	src/core/workflow/Orchestrator.ts	Logik ohne UI-Code.
prompt-*.js	src/core/prompts/*.ts	Prompts als Templates, die Sprache akzeptieren.
api-service.js	src/services/GeminiService.ts	Typisierte API-Calls.
UI (Anzeige)	index.html	index.html + src/App.tsx	Der Einstiegspunkt (React Root).
render-*-view.js	src/features/*/	Eigene Ordner pro View (z.B. /Planning).
interactive-renderer.js	src/components/cards/SightCard.tsx	Wiederverwendbare Komponenten.
Tools	file-actions.js	src/services/StorageService.ts	Speichern/Laden/Mergen von JSON.
2. Der Projektplan (Phasen & Aufgaben)

Wir arbeiten uns von "innen" (Daten) nach "au√üen" (UI) vor.

Phase 1: Das Fundament (SSOT & Datenstruktur) üèóÔ∏è

Ziel: Eine saubere Datenstruktur definieren, die i18n-f√§hig ist und das Merge-Problem l√∂st.

[ ] Aufgabe 1.1: TypeScript Interfaces erstellen (types.ts)

Definition des TripProject (das neue Speicherformat).

Definition von PlaceEntity (Orte) und ContentEntity (Texte), um Duplikate zu vermeiden.

[ ] Aufgabe 1.2: Statische Daten bereinigen (staticData.ts)

Portierung von app-data.js.

Crucial: Entfernen aller Strings ("Wanderurlaub") -> Ersetzen durch IDs ("interest_hiking").

Phase 2: Die Sprache (Internationalisierung) üåç

Ziel: Alle Texte aus dem Code extrahieren.

[ ] Aufgabe 2.1: Deutsches W√∂rterbuch erstellen (de.json)

√úbertrag aller UI-Texte aus index.html und app-data.js.

Strukturierung in Bereiche (z.B. navigation, cockpit, interests).

[ ] Aufgabe 2.2: Englisches W√∂rterbuch erstellen (en.json)

√úbersetzung der Keys aus 2.1 (kann ich f√ºr dich machen).

[ ] Aufgabe 2.3: i18n-Setup

Einrichten der Bibliothek i18next, damit die App wei√ü, wie sie W√∂rterb√ºcher l√§dt.

Phase 3: Das Gehirn (Die Magic Chain) üß†

Ziel: Die KI-Logik portieren, sodass sie sprachunabh√§ngig funktioniert.

[ ] Aufgabe 3.1: Prompt-Engine bauen (PromptBuilder.ts)

Eine Klasse, die sagt: "Generiere diesen Prompt, aber sag der KI, sie soll auf Englisch antworten".

[ ] Aufgabe 3.2: Prompts migrieren

Umschreiben von prompt-chef-planer.js, prompt-sammler.js etc. zu TypeScript-Templates.

[ ] Aufgabe 3.3: Workflow-Logik isolieren

Neubau des Orchestrators. Statt document.getElementById('loading').style.display = 'block' sendet er nur noch Status-Updates an den Store (state.isLoading = true).

Phase 4: Das Gesicht (UI & UX) üé®

Ziel: Die Benutzeroberfl√§che in React neu bauen.

[ ] Aufgabe 4.1: Basis-Layout

Header, Navigation, Sprach-Umschalter (DE/EN).

[ ] Aufgabe 4.2: Wizard-Komponenten

Neubau der Eingabe-Schritte (Cockpit, Interessen) basierend auf der neuen staticData.ts.

[ ] Aufgabe 4.3: Ergebnis-Ansichten

Die SightCard und den Tagesplaner neu bauen.

[ ] Aufgabe 4.4: Map-Integration

Einbinden von Leaflet (Karte) in die React-Umgebung.